## User Trainer Processing Workflow

`fetch_trainers.py` fetches pending user-submitted trainers from S3 into `scripts/User Trainers/`, with metadata indexed in `scripts/user_trainers.json`. Each entry has a `filename`, `trainer-name` (game name, often in Chinese), and optional fields: `trainer-source`, `notes`, `uploader-contact`.

Each fetched trainer lives in its own subfolder named after the original filename (including UUID). Inside that folder are the actual trainer files — the UUID suffix has already been stripped from the inner file(s), though the parent folder name still contains it.

When I give you one or more filenames from `user_trainers.json` to process, perform these 3 steps for each:

---

### Step 1: Add entry to `gcm_trainers.json`

Look up the filename in `user_trainers.json` to get its metadata. Then create a new entry in `gcm_trainers.json` following the structure of existing `"origin": "other"` entries at the bottom of the file.

Required fields:
- `game_name`: The official English game name (translate from Chinese `trainer-name` if needed, use proper title with colons for subtitles, e.g. "XCOM: Enemy Within")
- `origin`: Use `"other"` for exe/zip trainers, `"ct_other"` for .CT cheat tables
- `gcm_url`: `"GCM/GCM Trainers/<concise_filename>"` — the filename here should be concise and clean: just the essential trainer identity (game name + version if relevant), without author names, language tags, or platform tags. Keep the original file extension. If there are multiple files, use `.zip`
- `version`: The actual release/publish date of the trainer in `YYYY.M.D` format (research if possible from `trainer-source` URL or `notes`; use today's date only as fallback)

Optional fields (include when available):
- `author`: The trainer creator (from `trainer-source`, filename, or `notes` — NOT the uploader)
- `custom_name` / `custom_name_en` / `custom_name_zh`: Only if the trainer has a special tool name beyond just being a "trainer" (e.g. "Workshop", "Character Editor")
- `official_url`: The trainer's source URL (from `trainer-source` if it's a proper URL)

---

### Step 2: Append filename to `completed_trainers.txt`

Add the exact `filename` value from `user_trainers.json` as a new line in `scripts/completed_trainers.txt`. This marks it for S3 deletion on the next `fetch_trainers.py` run.

---

### Step 3: Move files to `build/bin/0 User Trainers/`

Create a destination folder under `build/bin/0 User Trainers/` named using this pattern:
```
{game_name} [{author}] [{custom_name}]
```
- Use `game_name` from the gcm_trainers.json entry (colons `: ` replaced with `_` in folder names)
- Omit `[author]` if no author is known
- Omit `[custom_name]` if not applicable
- Examples: `Forza Horizon 5 [Merika]`, `Watch Dogs [笑淫淫]`, `Core Keeper [RussDev7] [Workshop]`

Copy all files from `scripts/User Trainers/{filename}/` into this new folder. If any file inside still has a UUID suffix (pattern: `_<32hex>.ext`), rename it to remove the UUID. Use `-LiteralPath` in PowerShell for paths containing brackets `[]` or parentheses `()`.

---

### Reference

- `scripts/user_trainers.json` — source metadata for pending trainers
- `scripts/gcm_trainers.json` — official trainer registry (the file you're editing)
- `scripts/completed_trainers.txt` — deletion queue
- `scripts/User Trainers/` — downloaded trainer files
- `build/bin/0 User Trainers/` — curated output directory
- `scripts/upload_trainers.py` — the upload script that reads gcm_trainers.json and uploads from `build/bin/`